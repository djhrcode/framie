"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function f(o,a,r){return{asConstant(e){const n=()=>e;a.set(r.symbol,n)},asSingleton(e){const n={value:null},s=()=>(console.log("resolving singleton",n.value),n.value===null&&(n.value=e(o)),n.value);a.set(r.symbol,s)},asFactory(e){a.set(r.symbol,()=>e(o))}}}function u(){const o=new Map,a=(e,n,s)=>{console.log("Loading registry",s),Object.entries(s).forEach(([c,t])=>{const i=e.register(n[c]);if("isConstant"in t&&t.isConstant&&t.value)return i.asConstant(t.value);if("factory"in t&&t.isSingleton&&t.factory)return i.asSingleton(t.factory);if("factory"in t&&t.factory)return i.asFactory(t.factory);throw new Error("Unexpected dependency registry definition")})},r={get({symbol:e}){var n;if(o.has(e))return(n=o.get(e))==null?void 0:n();throw new Error(`DependencyNotFound: The dependency [${e.description}] has not been provided`)},register(e){return f(r,o,e)},registry({registry:e,modules:n,tokens:s}){a(r,s,e),Object.entries(n!=null?n:{}).forEach(([c,t])=>a(r,s[c],t)),console.log()}};return r}function l(o){return{get symbol(){return Symbol.for(o)}}}function g(o,{modules:a={}}={}){const r=new Map;return Object.entries(o).forEach(([e])=>{r.set(e,l(e))}),Object.entries(a).forEach(([e,n])=>{const s=new Map;Object.entries(n).forEach(([c])=>{s.set(c,l(`${e}.${c}`))}),r.set(e,Object.fromEntries(s.entries()))}),{registry:o,modules:a,tokens:Object.fromEntries(r.entries())}}exports.createContainer=u;exports.createDependency=f;exports.createRegistry=g;exports.createToken=l;
